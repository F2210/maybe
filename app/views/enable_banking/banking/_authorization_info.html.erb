<%= modal_form_wrapper title: t(".title") do %>
<div class="space-y-6">
    <div class="text-center">
        <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-blue-100">
            <%= lucide_icon "shield", class: "h-6 w-6 text-blue-600" %>
        </div>
        <h3 class="mt-3 text-lg font-medium text-gray-900"><%= t(".subtitle") %></h3>
    </div>

    <div class="mt-2">
        <div class="space-y-4">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <div class="flex h-8 w-8 items-center justify-center rounded-full border-2 border-blue-600 text-blue-600">
                        1
                    </div>
                </div>
                <div class="ml-4">
                    <h4 class="text-sm font-medium text-gray-900"><%= t(".step_1_title") %></h4>
                    <p class="mt-1 text-sm text-gray-500"><%= t(".step_1_description") %></p>
                </div>
            </div>

            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <div class="flex h-8 w-8 items-center justify-center rounded-full border-2 border-blue-600 text-blue-600">
                        2
                    </div>
                </div>
                <div class="ml-4">
                    <h4 class="text-sm font-medium text-gray-900"><%= t(".step_2_title") %></h4>
                    <p class="mt-1 text-sm text-gray-500"><%= t(".step_2_description") %></p>
                </div>
            </div>

            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <div class="flex h-8 w-8 items-center justify-center rounded-full border-2 border-blue-600 text-blue-600">
                        3
                    </div>
                </div>
                <div class="ml-4">
                    <h4 class="text-sm font-medium text-gray-900"><%= t(".step_3_title") %></h4>
                    <p class="mt-1 text-sm text-gray-500"><%= t(".step_3_description") %></p>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-6 flex justify-between space-x-4">
        <%= link_to enable_banking_psu_type_path(
            aspsp_id: @aspsp_id,
            aspsp_name: @aspsp_name,
            aspsp_country: @aspsp_country,
            auth_methods: @auth_methods,
            maximum_consent_validity: @maximum_consent_validity
          ),
          class: "inline-flex items-center text-sm text-gray-500 hover:text-gray-700",
          data: { turbo_frame: "modal" } do %>
        <%= lucide_icon "arrow-left", class: "w-4 h-4 mr-2" %>
        <%= t(".go_back") %>
        <% end %>

        <%= form_tag enable_banking_authorize_path, method: :post, class: "flex-1" do %>
        <%= hidden_field_tag :aspsp_id, @aspsp_id %>
        <%= hidden_field_tag :aspsp_name, @aspsp_name %>
        <%= hidden_field_tag :aspsp_country, @aspsp_country %>
        <%= hidden_field_tag :psu_type, @psu_type %>
        <%= hidden_field_tag :maximum_consent_validity, @maximum_consent_validity %>

        <%= button_tag type: :submit,
            class: "w-full rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600" do %>
        <%= t(".continue") %>
        <% end %>
        <% end %>
    </div>
</div>
<% end %>