<%= modal_form_wrapper title: t(".select_accounts") do %>
<div class="space-y-6">
    <div class="text-center">
        <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-blue-100">
            <%= image_tag "enable-banking.svg", class: "h-6 w-6 text-blue-600" %>
        </div>
        <h3 class="mt-3 text-lg font-medium text-gray-900"><%= t(".subtitle") %></h3>
        <p class="mt-2 text-sm text-gray-500"><%= t(".description") %></p>
    </div>

    <%= form_tag enable_banking_import_accounts_path, method: :post, class: "space-y-4" do %>
    <div class="space-y-4">
        <% @accounts.each do |account| %>
        <div class="relative flex items-start">
            <div class="flex h-6 items-center">
                <%= check_box_tag "account_ids[]", 
                  account["uid"], 
                  false, 
                  class: "h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600" %>
            </div>
            <div class="ml-3">
                <label class="text-sm font-medium text-gray-900">
                    <%= account["name"] || account["account_id"]["iban"] || account["account_id"]["other"]["identification"] %>
                </label>
                <p class="text-sm text-gray-500">
                    <%= account["currency"] %> â€¢ <%= account["details"] || account["product"] %>
                </p>
            </div>
        </div>
        <% end %>
    </div>

    <div class="mt-6 flex justify-between space-x-4">
        <%= link_to enable_banking_connect_path, 
            class: "inline-flex items-center text-sm text-gray-500 hover:text-gray-700",
            data: { turbo_frame: "modal" } do %>
        <%= lucide_icon "arrow-left", class: "w-4 h-4 mr-2" %>
        <%= t(".go_back") %>
        <% end %>

        <%= button_tag type: :submit,
            class: "flex-1 rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600" do %>
        <%= t(".import_selected") %>
        <% end %>
    </div>
    <% end %>
</div>
<% end %>